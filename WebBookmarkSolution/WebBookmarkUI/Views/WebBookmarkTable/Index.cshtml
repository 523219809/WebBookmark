@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model WebBookmarkUI.Models.UIWebFolderInfo
<script type="text/javascript">
    var indexURL = "@Url.Action("Index")";
    var saveBookmarkURL = "@Url.Action("AddBookmark")";
    var convertToUIWebFolderInfoURL = "@Url.Action("ConvertToUIWebFolderInfo")"; 
    var convertToUIBookmarkInfoURL = "@Url.Action("ConvertToUIBookmarkInfo")"; 
    var deleteInfoURL = "@Url.Action("DeleteBookmarkOrWebFolder")"; 
</script>
<script src="~/Scripts/layer/layer.js"></script>
<script src="~/DomainJS/webbookmarktable.js"></script>
<div class="admin-content">
    <div class="am-cf am-padding">
        <div class="am-fl am-cf"><strong class="am-text-primary am-text-lg">我的全部书签</strong> / <small>My Webfolder</small></div>
    </div>


    <div id="am-footer-modal"
         class="am-modal am-modal-no-btn am-switch-mode-m am-switch-mode-m-default">
        <div class="am-modal-dialog">
            <div class="am-modal-hd am-modal-footer-hd">
                <a href="javascript:void(0)" data-dismiss="modal" class="am-close am-close-spin " data-am-modal-close>&times;</a>
            </div>
            <div class="am-modal-bd" id="addFolderOrBookmark">
                    <div class="content am-center">
                        <h5 style="font-size:xx-large">新增书签/书签夹</h5>
                        <div id="editID" hidden></div>
                        <ul class="am-list">
                            <li class="am-text-left" style="margin: 5px 20px;">
                                <input type="text" id="bookmarkname" class="am-form-field am-radius" placeholder="名称">
                            </li>
                            <li class ="am-text-left" style="margin: 5px 20px; border:none">

                                <select id="bookmarkSelect" class="am-form-field am-radius" data-am-selected>
                                    <option value="bookmark">书签</option>
                                    <option value="folder">书签夹</option>
                                </select>

                                <select id="folderSelect" class="am-form-field am-radius am-text-right" data-am-selected>
                                    @if (Model != null && Model.ChildrenFolderList != null && Model.ChildrenFolderList != null)
                                    {
                                        <option value='@Model.UserWebFolderID'>@Model.WebFolderName</option>
                                        foreach (var folder in Model.ChildrenFolderList)
                                        {
                                            <option value='@folder.UserWebFolderID'>@folder.WebFolderName</option>
                                        }

                                    }
                                    else
                                    {
                                        <option value="0">书签栏</option>
                                    }
                                </select>

                            </li>
                            <li class="am-text-left" style="margin: 5px 20px;" id="bookmarkURL">
                                <input type="text" id="bookmarkhref" class="am-form-field am-radius" placeholder="URL地址">
                            </li>
                        </ul>
                        <div class="am-text-center" style="margin: 20px 20px;">

                            <button class="am-btn am-btn-secondary am-radius" id="btnSaveBookmark">保存</button>
                            <button class="am-btn am-btn-secondary am-radius" id="btnBookmarkCancel" onclick="javascript:void(0)" data-am-modal-close>取消</button>
                        </div>

                        <div class="am-form-group">
                           
                        </div>
                    </div>

            </div>

        </div>
    </div>

    <div class="am-g">
        <div class="am-u-sm-12 am-u-md-6">
            <div class="am-btn-toolbar">
                <div class="am-btn-group am-btn-group-xs">
                   
                     <footer data-am-widget="footer" data-am-footer="{  }">
                        <div class="am-footer-switch">
                            <span class="am-footer-ysp" data-rel="mobile"
                                  data-am-modal="{target: '#am-switch-mode'}">
                            <button type="button" class="am-btn am-btn-default" id="btnAddFolderOrBookmark"><span class="am-icon-plus"></span> 新增书签/书签夹</button>
                            </span>
                        </div>

                    </footer>

                </div>

                <div class="am-btn-group am-btn-group-xs">
                        <div class="am-footer-switch">
                            <button type="button" class="am-btn am-btn-default" id="btnBack"><span class="am-icon-reply"></span> 返回上一级</button>
                        </div>
                </div>
            </div>
        </div>
    </div>
    <div class="am-g">
        <div class="am-u-sm-12">
            <table class="am-table am-table-striped am-table-hover table-main ">
                <thead>
                    <tr>
                        <th class="table-id">类型</th>
                        <th class="table-main">名称</th>
                        <th class="table-date am-hide-sm-only">修改日期</th>
                        <th class="table-set">操作</th>
                    </tr>
                </thead>
                <tbody>
                 @if (Model != null && Model.ChildrenFolderList != null)
                 {
                     
                      <tr>
                            <td><span class="am-icon-folder"></span></td>
                            <td><span class="am-icon-reply" name="openfolder"><div name="divFolderID" style="display:none">@Model.ParentWebfolderID</div></span>
                            <td></td>
                            <td></td>
                     </tr>
                     
                     foreach (var folder in Model.ChildrenFolderList)
                     {
                        <tr>
                            <td><span class="am-icon-folder"></span></td>
                            <td>@folder.WebFolderName  <span class="am-icon-folder-open-o" name="openfolder"><div name="divFolderID" style="display:none"> @folder.UserWebFolderID</div></span>
                            <td>@folder.CreateTime</td>
                            <td>
                            <div class="am-btn-toolbar">
                                <div class="am-btn-group am-btn-group-xs">
                                    <button class="am-btn am-btn-default am-btn-xs am-text-secondary" id="folderedit">
                                        <div id="model" hidden>@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(folder))</div>
                                        <span class="am-icon-pencil-square-o"></span> 修改
                                    </button>
                                <button class="am-btn am-btn-default am-btn-xs am-text-danger am-hide-sm-only delete" id="delete" value="folder">
                                    <div name="infoID" style="display:none"> @folder.UserWebFolderID</div>
                                    <span class="am-icon-trash-o"></span> 删除</button>
                                </div>
                            </div>
                            </td>
                        </tr>
                     }
                     
                     
                      foreach (var bookmark in Model.UIBookmarkInfoList)
                     {
                        <tr>
                            <td><samp class="am-icon-bookmark"></samp></td>
                            <td><a href='@bookmark.Href'target='_blank'>@bookmark.BookmarkName  </a></td>
                            <td>@bookmark.CreateTime</td>
                            <td>
                            <div class="am-btn-toolbar">
                                <div class="am-btn-group am-btn-group-xs">
                                    <button class="am-btn am-btn-default am-btn-xs am-text-secondary" id="bookmarkedit">
                                        <div id="model" hidden>@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(bookmark))</div>
                                        <span class="am-icon-pencil-square-o"></span> 修改
                                    </button>
                                <button class="am-btn am-btn-default am-btn-xs am-text-danger am-hide-sm-only" id="delete" value="bookmark">
                                    <div name="infoID" style="display:none"> @bookmark.BookmarkInfoID</div>
                                    <span class="am-icon-trash-o"></span> 删除</button>
                                </div>
                            </div>
                            </td>
                        </tr>
                     }
                     
                     
                 }else
                 {
                     
                 }

                </tbody>
            </table>
           
        </div>
    </div>
</div>
